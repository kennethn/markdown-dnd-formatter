\documentclass[12pt,twocolumn]{article}

% Font and encoding
\usepackage{fontspec}
\usepackage{microtype}
\usepackage{soul}            % for underlines
\usepackage[normalem]{ulem} % prevents soul/ulem conflicts

\renewcommand{\ULdepth}{0.5ex}  % adjust this value to move the underline
\renewcommand{\ULthickness}{0.03em}  % underline thickness

\linespread{1.2}
\newcommand{\smallcapstext}[1]{%
  {\addfontfeatures{Letters=SmallCaps,LetterSpace=2.0}\textcolor{blue!70!black}{\textbf{#1}}}%
}

%\setmainfont{Charter}
\setmainfont{Libertinus Serif}[
  SmallCapsFeatures={Letters=SmallCaps},
  Scale=1.2
]
\newfontfamily\symbolsfont{Symbola}
\newfontfamily\blockquoteFont{Inter}
\newfontfamily\headerfont{Inter}

\pagestyle{plain}
\raggedbottom

\clubpenalty=10000  % Avoid orphans (first line of a paragraph at bottom of page)
\widowpenalty=10000 % Avoid widows (last line of paragraph at top of page)
\displaywidowpenalty=10000

% No full justification

\usepackage[document]{ragged2e}
\RaggedRight

% Turn off hyphenation
\usepackage[none]{hyphenat}

% Needed to prevent orphaned headings
\usepackage{needspace}
\newcommand{\stickysection}{\needspace{5\baselineskip}}
\newcommand{\stickysubsection}{\needspace{4\baselineskip}}
\newcommand{\stickysubsubsection}{\needspace{3\baselineskip}}

% Page layout
\usepackage[paper=letterpaper,top=0.35in,bottom=0.50in,left=0.35in,right=0.35in]{geometry}
\setlength{\columnsep}{24pt}

% Hyperlinks (no colors)
\usepackage[hidelinks]{hyperref}

% Colors for headings
\usepackage{xcolor}
\definecolor{sectioncolor}{HTML}{4B0082}       % Indigo
\definecolor{subsectioncolor}{HTML}{006400}    % Dark Green
\definecolor{subsubsectioncolor}{HTML}{8B0000} % Dark Red

\usepackage{etoolbox}
\makeatletter
% Remove vertical space before \section at top of page
\patchcmd{\@startsection}
  {\@afterindenttrue}
  {\@afterindentfalse}
  {}{}
\patchcmd{\@startsection}
  {\@afterheading}
  {\vspace*{-\topskip}\@afterheading}
  {}{}
\makeatother



\usepackage{parskip}
\setlength{\parskip}{10pt plus 2pt minus 1pt} % flexible ~20pt spacing
\setlength{\parindent}{0pt} % no indent for first lines

% Section formatting (no numbering, with colors and spacing)
\usepackage{titlesec}
\titleformat{\section}[block]{\Large\bfseries\color{sectioncolor}\headerfont}{}
  {0pt}{\stickysection}
\titleformat{\subsection}[block]{\large\bfseries\color{subsectioncolor}\headerfont}{}
  {0pt}{\stickysubsection}
\titleformat{\subsubsection}[block]
  {\normalsize\bfseries\color{subsubsectioncolor}\headerfont}
  {}
  {0pt}
  {\stickysubsubsection\normalsize\bfseries\color{subsubsectioncolor}\headerfont}
  [\vspace{2pt}\color{subsubsectioncolor}\hrule height 1pt]
\titlespacing*{\section}{0pt}{14pt plus 2pt minus 1pt}{10pt}
\titlespacing*{\subsection}{0pt}{8pt plus 1pt minus 1pt}{10pt}
\titlespacing*{\subsubsection}{0pt}{8pt plus 1pt minus 1pt}{10pt}

% Patch to remove space before first section
\usepackage{etoolbox}
\makeatletter
\pretocmd{\section}{\ifnum\value{section}=0 \vspace*{-20pt} \fi}{}{}
\makeatother

%\pretocmd{\itemize}{\vspace{6pt}}{}{}
%\apptocmd{\enditemize}{\vspace{6pt}}{}{}

% Page numbering bottom-right
\usepackage{fancyhdr}
\fancyhf{}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0pt}
\pagestyle{fancy}
\setlength{\footskip}{15pt}
\usepackage{enumitem}
\setlist[itemize]{itemsep=20pt, topsep=6pt, parsep=0pt, partopsep=0pt}


% Support for tables
\usepackage{longtable}       % For multi-page tables
\usepackage{booktabs}        % For better-looking tables (\toprule, \midrule, \bottomrule)
\usepackage{array}           % For custom column formatting
\usepackage{multirow}        % Optional: for rowspan-style cells
\usepackage{colortbl}        % Optional: for cell shading
\usepackage{tabularx}        % Optional: for auto-width tables
\usepackage{xcolor}          %

% Support for checkboxes
\usepackage{amssymb} % for \square


% Blockquote style (D&D-style box with Sans Serif)
\usepackage[most]{tcolorbox}
\definecolor{quoteboxbg}{gray}{0.95}
\tcbset{myquote/.style={
  breakable,
  enhanced,
  colback=blue!6!white, 
  boxrule=0pt,
  arc=0pt,
  left=6pt,
  right=6pt,
  top=4pt,
  bottom=4pt,
  boxsep=4pt,
  before skip=12pt,
  after skip=12pt,
  borderline west={1.5pt}{0pt}{blue!70!black},
  borderline east={1.5pt}{0pt}{blue!70!black},
  sharp corners,
  fontupper=\blockquoteFont\small,
  before upper={%
    \setlength{\parskip}{6pt}%
    \setlength{\baselineskip}{14pt}%
  }
}}

% Redefine blockquotes to use the tcolorbox
\let\oldquote\quote
\let\endoldquote\endquote
\renewenvironment{quote}
  {\par\begin{tcolorbox}[myquote]}
  {\end{tcolorbox}\par}

% Fix tightlist error
\providecommand{\tightlist}{%
  \setlength{\itemsep}{6pt}
  \setlength{\topsep}{6pt}
  \setlength{\parsep}{0pt}
  \setlength{\partopsep}{0pt}
}


% Highlighting fenced Divs for Encounter and Show Image boxes
\newenvironment{highlightencounterbox}
  {\begin{tcolorbox}[
    enhanced,
    breakable,
    colback=red!10,
    colframe=red!70!black,
    boxrule=1pt,
    arc=2pt,
    left=6pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    boxsep=4pt,
    before skip=10pt,
    after skip=10pt,
    fontupper=\blockquoteFont\footnotesize,
    before upper={
      \setlength{\parskip}{6pt}
      \setlength{\baselineskip}{13pt}
    },
    after upper={\par\vspace{12pt}}
  ]{\symbolsfont \textcolor{red!70!black}{⚔}~\textbf{Encounter:}} \par}
  {\end{tcolorbox}}

\newenvironment{highlightshowimagebox}
  {\begin{tcolorbox}[
    enhanced,
    breakable,
    colback=yellow!10,
    colframe=orange!90!black,
    frame style={draw=orange!90!black, line width=1pt},
    boxrule=1pt,
    sharp corners,
    left=6pt,
    right=6pt,
    top=4pt,
    bottom=4pt,
    boxsep=4pt,
    before skip=10pt,
    after skip=10pt,
    fontupper=\blockquoteFont\footnotesize,
    before upper={%
      \setlength{\parskip}{6pt}
      \setlength{\baselineskip}{13pt}
    }
  ]{\symbolsfont \textcolor{orange!90!black}{◆}~\textbf{Show image:}} \par}
  {\end{tcolorbox}}

% suppress opening top margin
\usepackage{etoolbox}
\newif\iffirstsection
\firstsectiontrue
\pretocmd{\section}{\iffirstsection\vspace*{-20pt}\firstsectionfalse\fi}{}{}
\usepackage{changepage} % For adjustwidth environment

\begin{document}

\begingroup
\makeatletter
\setlength{\@fptop}{0pt}
\vspace*{-\topskip}
\makeatother
\endgroup
\vspace*{-\topskip}
%\vspace*{-5pt}


$body$

\end{document}
